
<h1>TACAS 2022 Submission #27</h1>

<p>For the regular tool paper submission #26 TempAS: A Temporal Verification Tool for Mixed Async-Sync Concurrency </p>

<h4 id="quick-links">Quick links</h4>
<ul>
  <li>Browse the development at GitHub: <a href="https://github.com/songyahui/Semantics_HIPHOP">online</a></li>
  <li>A demo Page: <a href="http://loris-5.d2.comp.nus.edu.sg/MixedSyncAsync/introduction.html">online</a></li>
  <li>VirtualBox image: <a href="">online</a></li>
</ul>


<h2>Getting started</h2>
<p>The artifact consists of i) <em> a Front End: Forward Verifier</em>; and ii) <em> a Back End: the term rewriting system</em>.<br>
There are two ways to evaluate the artifact:</p>
<ul>
  <li>by using a virtual machine (VM) provided;</li>
  <li>by using your local machine with <code>OCaml version 4.10.0</code>. 

</ul>
Below, we provide guidance for both approaches.


<h3>Using the Virtual Machine</h3>
<p>You need to get a <a href="https://www.virtualbox.org/">VirtualBox</a> (tested w/ version 6.1.26) on your system and import the VM
<code class="language-plaintext highlighter-rouge">pwt.ova</code>. Please, note the following:</p>
<ul>
  <li>The VM should be provided with at least 4GB of RAM.</li>
  <li>The VM is better to be provided with 4 CPUs (but 2 CPUs should be enough).</li>
  <li>The VM is a Ubuntu 18.04 with <code class="language-plaintext highlighter-rouge">OCaml</code>, <code class="language-plaintext highlighter-rouge">vim</code> and <code class="language-plaintext highlighter-rouge">emacs</code> being set-up.</li>
  <li>Username and password are both <code>tacas2022</code>.</li>
</ul>

<p>The source code can be found in the folder <code class="language-plaintext highlighter-rouge">/home/tacas2022/Semantics_HIPHOP</code>. 
  <br>To compile it,
you need to run <code class="language-plaintext highlighter-rouge">cd /home/tacas2022/Semantics_HIPHOP &amp;&amp; dune build</code> in a terminal. 


<h3 id="using-your-own-coq-setup-with-opam">Using your local machine</h3>
<li>Check out the instructions on GitHub: <a href="https://github.com/songyahui/Semantics_HIPHOP#readme">readme</a></li>
  

<h2 id="checking-the-artifacts-code">Checking the artifact’s Functionality</h2>
<p>After the project is compiled, you may want to check how the main definitions and results in Coq are related to the ones in the paper.</p>

<table>
  <thead>
    <tr>
      <th>Paper</th>
      <th>Description</th>
      <th>Source file</th>
      <th>Testing command</th>
      <th>Expected result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>§4.3 Fig. 7 &nbsp &nbsp &nbsp</td>
      <td>Mixed Async and Sync Concurrency with Function Calls. &nbsp &nbsp &nbsp</td>
      <td><code>src/programs/paper_example1.hh</code> &nbsp &nbsp &nbsp</td>
      <td><code>dune exec ./hip.exe src/programs/paper_example1.hh</code> &nbsp &nbsp &nbsp </td>
      <td>Correct</td>
    </tr>

    <tr>
      <td>§5.1 Fig. 9 &nbsp &nbsp &nbsp</td>
      <td>Interference Among Threads. &nbsp &nbsp &nbsp</td>
      <td><code>src/programs/54_Interference.hh</code> &nbsp &nbsp &nbsp</td>
      <td><code>dune exec ./hip.exe src/programs/54_Interference.hh</code> &nbsp &nbsp &nbsp </td>
      <td>Correct</td>
    </tr>

    <tr>
      <td>§7.3 Fig. 10 &nbsp &nbsp &nbsp</td>
      <td>Causality in a Loop. &nbsp &nbsp &nbsp</td>
      <td><code>src/programs/25_causality.hh</code> &nbsp &nbsp &nbsp</td>
      <td><code>dune exec ./hip.exe src/programs/25_causality.hh</code> &nbsp &nbsp &nbsp </td>
      <td>Correct</td>
    </tr>

    <tr>
      <td>§7.4 Fig. 11 &nbsp &nbsp &nbsp</td>
      <td>A bug found. &nbsp &nbsp &nbsp</td>
      <td><code>src/programs/52_Constructiveness.hh</code> &nbsp &nbsp &nbsp</td>
      <td><code>dune exec ./hip.exe src/programs/52_Constructiveness.hh</code> &nbsp &nbsp &nbsp </td>
      <td>Correct</td>
    </tr>



    <tr>
      <td>§6 &nbsp Table 1 &nbsp &nbsp &nbsp</td>
      <td>The post condition proving process for Fig. 8. &nbsp &nbsp &nbsp</td>
      <td><code>src/effects/Mixed_1.ee</code> &nbsp &nbsp &nbsp</td>
      <td><code>dune exec ./trs.exe src/effects/Mixed_1.ee</code> &nbsp &nbsp &nbsp </td>
      <td>Correct</td>
    </tr>

    <tr>
      <td>§6.1 Table 2 &nbsp &nbsp &nbsp</td>
      <td>The reoccurrence proving example. &nbsp &nbsp &nbsp</td>
      <td><code>src/effects/reoccur1.ee</code> &nbsp &nbsp &nbsp</td>
      <td><code>dune exec ./trs.exe src/effects/reoccur1.ee</code> &nbsp &nbsp &nbsp </td>
      <td>Correct</td>
    </tr>

    <tr>
      <td>§6.2 Table 3 &nbsp &nbsp &nbsp</td>
      <td>The example for Await. &nbsp &nbsp &nbsp</td>
      <td><code>src/effects/Wait_1.ee</code> &nbsp &nbsp &nbsp</td>
      <td><code>dune exec ./trs.exe src/effects/Wait_1.ee</code> &nbsp &nbsp &nbsp </td>
      <td>Correct</td>
    </tr>
    


    
  
  </tbody>
</table>


<h2 id="checking-the-artifacts-code">Checking the artifact’s Reusability</h2>

<h3 id="description-of-the-projects-files">Description of the project’s files</h3>


<h3 id="tool-structure">Tool structure</h3>

<p>Most of the source is boiler plate to tie together parsers, the two interesting files are:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">src/Preliminaries.ml</code> contains the interface to Z3</li>
  <li><code class="language-plaintext highlighter-rouge">src/PomsetPTSeq.ml</code> implements the semantics as presented in Figure 1, with register recycling. The paper’s rules are referenced in comments like <code class="language-plaintext highlighter-rouge">(* M6 *)</code> and <code class="language-plaintext highlighter-rouge">(* R4a *)</code>.</li>
</ul>

<p>The tool has been written to be faithful to the mathematics without too much deviation for efficiency’s sake. The
majority of the complexity is in the implementation of <code class="language-plaintext highlighter-rouge">seq_rule</code> and <code class="language-plaintext highlighter-rouge">if_rule</code>, as these have to implement merging. In
PwTer, all events have globally unique identifiers, so possible valid merges have to be calculated at these compositions
and new labellings must be produced. This yields quite a lot of fiddly maps which have to be applied carefully to
preserve the semantics.</p>
